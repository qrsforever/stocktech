
# Required Dependences

- `sudo pip install -U wxpy` [-i "https://pypi.doubanio.com/simple/"]

- `sudo pip install -U pillow` 终端显示二维码

- `sudo apt-get install okular` 看epub文档

- `sudo apt-get install mysql-server mysql-client`

- `sudo pip3 install PyMySQL`

# 字符对应关系

英文|中文
:----:|:--:
TCLOSE    |  收盘价
HIGH      |  最高价
LOW       |  最低价
TOPEN     |  开盘价
LCLOSE    |  前收盘
CHG       |  涨跌额
PCHG      |  涨跌幅
TURNOVER  |  换手率
VOTURNOVER|  成交量
VATURNOVER|  成交金额
TCAP      |  总市值
MCAP      |  流通市值

# 腾讯API

## 实时成交量明细

1. `http://stock.gtimg.cn/data/index.php?appn=detail&action=data&c=sh600532&p=0&d=20190429`

    ```
    v_detail_data_sh600532=[0,"0/09:25:04/5.42/0.03/336/182112/S|1/09:30:03/5.48/0.06/140/76637/B|2/09:30:06/5.47/-0.01/436/237111/M|3/09:30:09/5.46/-0.01/28/15278/M|4/09:30:12/5.46/0.00/5/2730/B|5/09:30:15/5.45/-0.01/2/1090/S|6/09:30:20/5.46/0.01/88/48044/B|7/09:30:24/5.45/-0.01/66/36024/M|8/09:30:27/5.45/0.00/72/39270/S|...|66/09:34:12/5.42/0.00/2/1084/M|67/09:34:13/5.42/0.00/183/99023/B|68/09:34:21/5.42/0.00/11/5962/B|69/09:34:24/5.42/0.00/47/25474/B"]

    ```

**p是分页, 70个交易项为一页**

2. `http://stock.gtimg.cn/data/index.php?appn=detail&action=timeline&c=sh600532&d=20190429`

    间隔五分钟

    ```
    v_detail_time_sh600532=[20190430,"09:25:04~09:34:24|09:34:25~09:39:18|09:39:19~09:44:23|09:44:26~09:51:32|09:51:34~09:58:32|09:58:37~10:04:08|10:04:11~10:12:27|10:12:30~10:18:30|10:18:36~10:30:17|10:30:36~10:40:17|10:40:26~10:52:42|10:52:48~11:04:59|11:05:33~11:23:48|11:23:51~13:09:45|13:09:47~13:23:56|13:24:03~13:35:08|13:35:18~13:46:07|13:46:12~13:55:24|13:55:28~14:07:14|14:07:17~14:15:53|14:16:00~14:31:19|14:31:25~14:46:01|14:46:16~14:55:15|14:55:18~15:00:01"]
    ```

3. `http://stock.gtimg.cn/data/index.php?appn=detail&action=download&c=sh600532&d=20190429`

    时间间隔2-3秒

```xls
成交时间	成交价格	价格变动	成交量(手)	成交额(元)	性质
09:25:04	5.7	        0	        482	        274740	    卖盘
09:30:02	5.64	    -0.06	    1413	    799905	    卖盘
09:30:05	5.75	    0.11	    584	        335239	    买盘
09:30:08	5.73	    -0.02	    110	        63228	    卖盘
```

## 列出所有股票

`http://stock.gtimg.cn/data/index.php?appn=rank&t=ranka/chr&p=1&o=0&l=40&v=list_data`

appn 应用: rank, price, usRank,detail, dadan, radar  
action 动作: data, download, timeline, summary  
t 类型:rank{a, b, ash, bsh, asz, bsz}/{chr, code, volume} , a股,b股  
o 排序:0|1  
p 分页  
l 一页多少  
v 变量名(任意合法字符)  
chr: 涨跌%  

```
var list_data={t:'ranka/chr',p:1,total:91,l:40,o:1,data:'sz300362, ..., sh601018,sz002124'};
```

## 分价表

`http://stock.gtimg.cn/data/index.php?appn=price&c=sh600103`

```
    v_psh600103=[20190506,152741,51291,"2.90~418~418^2.91~6110~6571^2.92~3901~6664^2.93~7478~11342^2.94~3774~8617^2.95~3352~4302^2.96~3750~5716^2.97~942~3407^2.98~12414~13749^2.99~8312~11347^3.00~6956~9796^3.01~9427~10475^3.02~3275~6364^3.03~6195~10681^3.04~9580~12214^3.05~8439~18824^3.06~6662~8458^3.07~4956~6735^3.08~6865~11304^3.09~3707~8090^3.10~1100~3905^3.12~2212~2212"];
```

## 最新行情

`http://qt.gtimg.cn/q=sh600519`

```
 0: 未知
 1: 股票名字
 2: 股票代码
 3: 当前价格
 4: 昨收
 5: 今开
 6: 成交量(手)
 7: 外盘
 8: 内盘
 9: 买一
10: 买一量(手)
11-18: 买二 买五
19: 卖一
20: 卖一量
21-28: 卖二 卖五
29: 最近逐笔成交
30: 时间
31: 涨跌
32: 涨跌%
33: 最高
34: 最低
35: 价格/成交量(手)/成交额
36: 成交量(手)
37: 成交额(万)
38: 换手率
39: 市盈率
40:
41: 最高
42: 最低
43: 振幅
44: 流通市值
45: 总市值
46: 市净率
47: 涨停价
48: 跌停价
```

```
v_sh600519="1~贵州茅台~600519~903.70~974.00~925.50~75218~33545~41542~903.50~2~903.43~1~903.42~4~903.41~2~903.40~150~903.70~17~904.00~40~904.34~1~904.99~3~905.00~57~10:49:56/903.70/39/M/3524187/16407|10:49:53/903.42/7/S/632434/16397|10:49:50/903.72/31/B/2800956/16386|10:49:47/903.72/38/B/3433915/16375|10:49:43/903.50/4/S/405737/16365|10:49:41/903.66/7/M/632585/16356~20190506104956~-70.30~-7.22~935.00~900.00~903.37/74738/6859508923~75218~690292~0.60~29.94~~935.00~900.00~3.59~11352.26~11352.26~9.15~1071.40~876.60~5.20~41~917.72~25.29~32.25~~~1.10~690291.62";
```

## 实时资金流向

`http://qt.gtimg.cn/q=ff_sh600519`

```
 0: 股票代码
 1: 主力流入 (万)
 2: 主力流出
 3: 主力净流入
 4: 主力净流入百分比: 主力净流入/主力总
 5: 散户流入
 6: 散户流出
 7: 散户净流入
 8: 散户净流入百分比: 散户净流入/散户总
 9: 资金流入流出总和1+2+5+6 (错误)
10: 未知
11: 未知
12: 名字
13: 日期
14: 前1日的(净流入^净流出)
15: 前2日的(净流入^净流出)
16: 前3日的(净流入^净流出)
17: 前4日的(净流入^净流出)
```

```
v_ff_sh600519="sh600519~74662.05~59272.64~15389.41~4.13~298207.28~292088.91~6118.37~1.74~8210663010.00~255018.74~268511.34~贵州茅台~20190507~20190506^130188.91^186008.78~20190430^11481.52^2821.20~20190429^29768.80^10557.54~20190426^8917.45^9851.18~1491187.00~6579959.00~20190507143258";
```

## 获取盘口分析

`http://qt.gtimg.cn/q=s_pksh600519`

```
0: 买盘大单(小数,不是百分比, 可以转为100%形式
1: 买盘小单
2: 卖盘大单
3: 卖盘小单
```

```
v_s_pksh600519="0.424~0.059~0.458~0.059";
```
**不通软件算法和大单标准不统一, 所有结果不一致**

**这里的数据和资金流向里的主力散户数据计算的也不一致**

## 简要信息

`http://qt.gtimg.cn/q=s_sh600519`

```
 0: 未知
 1: 股票名称
 2: 股票代码
 3: 当前价格
 4: 涨跌
 5: 涨跌%
 6: 成交量(手)
 7: 成交额(万)
 8:
 9: 总市值
```

```
v_s_sh600519="1~贵州茅台~600519~850.00~-34.40~-3.89~54040~464924~~10677.68";
```

## 板块

1. 获取板块类型下的所有板块ID

`http://stock.gtimg.cn/data/view/bdrank.php?&t=02/averatio&p=1&o=0&l=400`

板块名字 | 板块类型(t=)
--------:|:----
腾讯行业分类 | 01
概念分类 | 02
地域分类 | 03
证监会行业分类 | 04

结果:  
```
var vRESULT={t:'02/averatio',p:1,total:29,l:10,o:0,data:'bkqt026297,bkqt021228,bkqt026548,bkqt026102,bkqt021419,bkqt026510,bkqt021041,bkqt026340,bkqt026517,bkqt021255'};
```

2. 获取某板块的基本信息(名子)

`http://qt.gtimg.cn/q=bkqt026297&r=111234555`

q: 板块ID  
r: 随机书可选

结果:  
```
v_bkqt026297="026297~电子发票~5~2~1~8~2569.80~83.07~3.34~388181.00~62805.00~sh600601~sz300525";
```

3. 获取某版本下的所有股票

`http://stock.gtimg.cn/data/index.php?appn=rank&t=pt021255/chr&p=1&o=0&l=400&v=list_data`

结果:  
```
var list_data={t:'pt021255/chr',p:1,total:1,l:400,o:0,data:'sz000876,sz002157,sz002567,...,sz002505'};
```

## 实时成交量明细


# 新浪API

## 分时数据

## 查询股票最新行情

[例](http://hq.sinajs.cn/list=sh601003,sh601001)

```
0:"大秦铁路",股票名字;
1:"27.55″,今日开盘价;
2:"27.25″,昨日收盘价;
3:"26.91″,当前价格;
4:"27.55″,今日最高价;
5:"26.20″,今日最低价;
6:"26.91″,竞买价,即"买一"报价;
7:"26.92″,竞卖价,即"卖一"报价;
8:"22114263″,成交的股票数
9:"589824680″,成交金额,单位为"元";
10:"4695″,"买一"申请4695股,即47手;
11:"26.91″,"买一"报价;
12:"57590″,"买二"
13:"26.90″,"买二"
14:"14700″,"买三"
15:"26.89″,"买三"
16:"14300″,"买四"
17:"26.88″,"买四"
18:"15100″,"买五"
19:"26.87″,"买五"
20:"3100″,"卖一"申报3100股,即31手;
21:"26.92″,"卖一"报价
(22, 23), (24, 25), (26,27), (28, 29)分别为"卖二"至"卖四的情况"
30:"2008-01-11″,日期;
31:"15:05:32″,时间

```

# Others

- [wxpy](https://wxpy.readthedocs.io/zh/latest/index.html)

- [腾迅股票数据接口](http://www.cnblogs.com/skating/p/6424342.html)

- [股票API汇总](https://blog.csdn.net/luanpeng825485697/article/details/78442062)

- [股票历史数据](https://www.cnblogs.com/merseyalma/p/6107444.html)

- [PyMySQL 学习](http://www.runoob.com/python3/python3-mysql.html)
